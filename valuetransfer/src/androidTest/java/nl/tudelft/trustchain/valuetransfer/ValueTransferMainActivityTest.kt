package nl.tudelft.trustchain.valuetransfer

import androidx.core.net.toUri
import androidx.test.ext.junit.runners.AndroidJUnit4
import nl.tudelft.trustchain.valuetransfer.ui.exchangelink.ExchangeTransferMoneyLinkFragment
import org.junit.Assert.assertEquals
import org.junit.Test
import org.junit.runner.RunWith

@RunWith(AndroidJUnit4::class)
class ValueTransferMainActivityTest {
    private val exchangeTransferMoneyLinkFragment = ExchangeTransferMoneyLinkFragment()
    private val link: String =
        "http://trustchain.tudelft.nl/requestMoney?amount=5%2C00&message=Testing&host=http://localhost&paymentId=paymentId&public=4c69624e61434c504b3aa24b3257da51ac40c2d333660a99807d1ac28c087fafab4386b5b9a399829869d8b208503f638898c058d5f4bff9f51c5ff6a7b089b6318b63a8e899506d32ea&signature=Lu%2B1OdRuPabsHQOpgUX%2FKLhjs%2BM9Jtl1dqE4Nv%2BOuvGVqZs976VXvQf6C99j89AyR5PjKJ4nMZzW%0Aiu03Hh5BiwoUX37ZjsbacMXTIA9Z%2FfZH5nfp41P43hMVK1SX1NvA%2BkhNAf9PfoLD4B0O2arS08cn%0A86A7EsfZ280eP9wR85aZp3GoVW9Orw7phKpr7xl8MJLUNpXlmmUknJcJa5NuzIaoMdNLeMb5XRf0%0AJ8XeAz2ioohnJOtWNDZoZorNsWq62bNR8TVsAMEKzuoPi5vQodYFhBvbAyDKDxFnIngK%2F7cREuLi%0AlUOA46zD5b%2BUbIi9r3SlsGGeUDBWYGJGupSkOw%3D%3D%0A&key=22112880538325711082929164505479434448702328344557187367342207475388644257110806139611799809464640823082323655628405410151260716718139514692215234222900958092635522100228513833028246772610614128611160732592085025046781577375269119711020482520368618045472206666761058849841875149384960693534431196976566719997163894480657455371895342079759213270399914816268443121489662692752611989084030335872789921289423509362759156291674430963490933843586412073559093443219230198463763691910153476421829889404655105105858214310213849696806994826340563521222805033044846814047133343917039375708431179138075876370566015630078683524373%7C%7C65537"

    @Test
    fun handlingIncomingLinks() {
        assertEquals(true, exchangeTransferMoneyLinkFragment.handleLinkRequest(link.toUri()))
    }
}
